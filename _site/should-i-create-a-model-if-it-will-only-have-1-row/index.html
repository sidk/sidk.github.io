<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Should I create a model if it will only have 1 row? | Duck Type Labs</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Should I create a model if it will only have 1 row?" />
<meta name="author" content="Sid" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A post on Reddit says:" />
<meta property="og:description" content="A post on Reddit says:" />
<link rel="canonical" href="https://ducktypelabs.com/should-i-create-a-model-if-it-will-only-have-1-row/" />
<meta property="og:url" content="https://ducktypelabs.com/should-i-create-a-model-if-it-will-only-have-1-row/" />
<meta property="og:site_name" content="Duck Type Labs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-11-22T16:28:12-05:00" />
<script type="application/ld+json">
{"url":"https://ducktypelabs.com/should-i-create-a-model-if-it-will-only-have-1-row/","headline":"Should I create a model if it will only have 1 row?","dateModified":"2015-11-22T16:28:12-05:00","datePublished":"2015-11-22T16:28:12-05:00","author":{"@type":"Person","name":"Sid"},"description":"A post on Reddit says:","mainEntityOfPage":{"@type":"WebPage","@id":"https://ducktypelabs.com/should-i-create-a-model-if-it-will-only-have-1-row/"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=f6b9e6ed502ef568e14c2ce9e1199c7d1e522e13">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      

      <p>A post on Reddit says:</p>

<blockquote>
  <p>I’m not sure how best to do this. I would just set up a model, but that seems wrong to have a model with just 1 row in it (it’s a single charity). Is there a better way to do this? STI? something else?</p>
</blockquote>

<p>It can seem like overkill to create a database table and a corresponding ActiveRecord model if you know for a fact that your table will only have one row. This is a pretty common situation, and there are a couple of ways to deal with this.</p>

<p>Note: <a href="http://www.patmaddox.com/">Pat Maddox’s</a> <a href="https://www.reddit.com/r/rails/comments/3jxo4d/help_should_i_create_a_model_if_it_will_only_have/">amazing comment on Reddit</a>, which addresses this question, was the primary inspiration for this post.</p>

<p>First, if <strong>non-developers</strong> need the ability to update information that this “model” would contain, then yes, you should create an ActiveRecord model. This will of course give you all the benefits of ActiveRecord as well, like being able to use <code class="language-plaintext highlighter-rouge">has_many</code>, <code class="language-plaintext highlighter-rouge">belongs_to</code> and everything else.</p>

<p>If <strong>only developers</strong> are going to be concerned with and using this model, <strong>you don’t have to tie it to the database and can implement it as a “Plain Old Ruby Object” aka a “PORO”</strong>.</p>

<p>The advantage with PORO’s is that they are cheap to instantiate because you won’t be making a call to the database when you do so. Setting up association-like behavior can be as simple as defining either instance or class methods on the PORO. As Pat advises in his comments however, you should always ask yourself what benefit you’d get from implementing association-like behavior in your PORO to ensure that you’re doing it for the right reasons, and to keep your code easy to understand.</p>

<p>So, going with the example in the Reddit post above, where we have a <code class="language-plaintext highlighter-rouge">Charity</code> model (this is the model that will only have one “row” and the one we will be writing a PORO for) which needs to define a <code class="language-plaintext highlighter-rouge">has_many</code> type association with the <code class="language-plaintext highlighter-rouge">Donation</code> model, you’d have something that looks like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Charity #this is our PORO
  def name
    'The Human Fund'
  end

  def donations
    Donation.all
  end
end

class Donation &lt; ActiveRecord::Base #this corresponds to a table in the DB
  validates :amount, presence: true

  def charity
    Charity.new
  end
end
</code></pre></div></div>

<p>As you can see, we’re manually defining the methods (<code class="language-plaintext highlighter-rouge">#donations</code> and <code class="language-plaintext highlighter-rouge">#charity</code>) that we’d get automatically if we used <code class="language-plaintext highlighter-rouge">has_many</code>. This allows us to get around the fact that a <code class="language-plaintext highlighter-rouge">Charity</code> object does not correspond to a table in the database, and lets other parts of our code use <code class="language-plaintext highlighter-rouge">Charity</code> objects as they would any other ActiveRecord object.</p>

<p>For more association type goodness on POROs, also check out the <a href="https://github.com/joker1007/activemodel-associations">activemodel-associations gem</a>.</p>

<p>So if you decide to go with a PORO, you next question is probably: <strong>Where should this file reside?</strong></p>

<p>There are a couple of common options – in the models directory with the rest of the models in /app/models, or in the /lib directory. Pat Maddox recommends the models directory, and I concur, because if you’re going to treat it like a model in other parts of your code, it’s natural that other developers (or you in the future) will look for the class in the models directory. That being said, this is just a convention, and either way works.</p>

<p>As always, let me know in the comments below if you have a question that is not covered by this article (maybe polymorphic associations?), and I’ll get back to you ASAP.</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
